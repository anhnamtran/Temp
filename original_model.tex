\usepackage{listings}
\newcommmand{\code}[1]{\texttt{#1}}

\subsection{Overview}
This model uses prioritized ordering between values of expressions. It tells the
cost model which value it cares about the most. From first to last, the cost
model will compare the asymptotic runtimes, the max storage sizes, the true
runtimes, and the true sizes of two expressions.

Because of the prioritized ordering, values lower in the prioritized list will
only be calculated to break ties from the more important ones.

\subsection{Changes Made}
There are special heuristics that Cozy follows to prevent unwanted behaviors,
one of which is having integer arithmetic stored as a state variable. Once this
heuristic is removed, Cozy will start producing unwanted state variables.
Specifically, when provided with this specification and no heuristic:

\begin{lstlisting}
    Incrementer:
        state x : Int
        query get()
            x
        op increment()
            x = x + 1;
\end{lstlisting}

Cozy will continuously store each increment of \code{x} as state variables. As
Cozy runs for longer and longer, the stored states will go from \code{(x + 1)},
to \code{((x + 1) + 1)}, to \code{(((x + 1) + 1) +1)}, and so forth.

When the heuristic is not in place, the cost model will tell Cozythat storing
each increment of \code{x} as a state is better than just storing \code{x}
itself. To prevent this behavior and remove the necessity of the heuristic, we
introduced freebies to the cost model. Freebies are state variables that will
have no cost. They are state variables chosen from a list of variables that are
maintained by the query currently being improved. By choosing the freebies this
way, we make sure that the state varable is only free for subqueries derived
from the current query and not for any other queries. This also helps counteract
the possibility of Cozy changing its mind on a state and decides to not use it
any more.
